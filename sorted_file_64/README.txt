Υλοποίηση Συστημάτων Βάσεων Δεδομένων 
Άσκηση 3

Μπούσουλας Δημήτρης - 1115201500106
Λάλουσης Άγγελος    - 1115201500081

Η συνάρτηση SR_ErrorCode SR_SortedFile:
1ο Βήμα:
Αρχικα αντιγράφουμε τις εγγραφές απο το πρωτότυπο αρχείο “unsorted_data.db” στο αντίγραφο αρχείο temp1 το οποίο μπορεί να είναι είτε “temp_id1,db”, είτε “temp_name1.db”, είτε “temp_surname1.db”,
ανάλογα το fieldNo. Στη συνέχεια βρίσκουμε τον αριθμό όλων των blocks και τα ταξινομούμε ανά buffersize με τη συνάρτηση quickSort. Για τις ανάγκες της ταξινόμησης δημιουργούμε τον πίνακα blocks[].
Ο πίνακας αυτός αποτελείται από δείκτες σε block. Στην συνάρτηση partition υπάρχουν οι εξής δείκτες: left_block_pointer, left_rec_pointer, right_block_pointer και right_rec_pointer. Όταν οι 
left_rec_pointer φτάσει στην τελευταία θέση των εγγραφών του μπλοκ τότε ο left_block_pointer αυξάνεται κατά 1 και δείχνει στο επόμενο block και ο left_rec_pointer μηδενίζεται ώστε να δείχνει στην
πρώτη εγγραφή του μπλοκ. Αντίστοιχα όταν ο δείκτης right_rec_pointer φτάσει στην πρώτη θέση των εγγραφών του μπλοκ τότε ο right_block_pointer μειώνεται κατά 1 και δείχνει στο προηγούμενο block ενώ
ο right_rec_pointer παίρνει την τιμή BF_BLOCK_SIZE/sizeof(Record) (δηλαδή το 17) ώστε να δείχνει στην τελευταία εγγραφή του καινούργιου μπλοκ.


2ο Βήμα:
Το 2ο βήμα ξεκινάει με το temp1 να περιέχει το ταξινομημένο (ανά buffersize blocks) αρχείο. Δημιουργεί ένα 2ο temp με όσα μπλοκ έχει και το 1ο. Επίσης χρησιμοποιούμε μία flag για να ξέρουμε ποιο
απ'τα 2 temp έχει το μερικώς ταξινομημένο αρχείο και ποιο θα χρησιμοποιηθεί σαν output. Έπειτα ξεκινάει η επανάληψη μέχρι να ολοκληρωθεί η ταξινόμηση με την μεταβλητή blocks_num να περιέχει το
πλήθος των ομάδων από μπλοκ (για παράδειγμα όταν έχουμε 159 μπλοκ δεδομένων και buffersize ίσο με 3, στην 1η επανάληψη έχει την τιμή 53 επειδή τα μπλοκ είναι ταξινομημένα σε κάθε μία απ'της 53
3αδες). Στην συνέχεια παίρνει buffersize-1 μπλοκ (το πρώτο από κάθε 3αδα για τις πρώτες 2 3αδες μπλοκ στο παράδειγμα) μέχρι να τα πάρει όλα και για όλα τα μπλοκ των ομάδων που πήρε βρίσκει την
μικρότερη εγγραφή εκείνης της στιγμής και την αποθηκεύει στο min_rec. Αυξάνει τους αντίστοιχους δείκτες και αν αλλάξει μπλοκ κάνει και GetBlock. Έπειτα πάει και γράφει την εγγραφή στο block_output
και αν αυτό γέμισε το γράφει στον δίσκο. Στο τέλος της εξωτερικής while αλλάζει την flag και αυξάνει την m ώστε να ξέρουμε οι αρχικές 3αδες του παραδείγματος αν έχουν γίνει 6αδες, 12αδες κτλ. Τέλος
ανάλογα με την τιμή που έχει η flag ξέρουμε ποιο απ'τα 2 temp έχει το ταξινομημένο αρχείο και το αντιγράφουμε στο output και διαγράφουμε τα temp.

ΣΗΜΕΙΩΣΗ: Δεν προλάβαμε να ολοκληρώσουμε το debuging στο 2ο βήμα και καταλήγει σε error, γι´ αυτό το έχουμε σχολιασμένο!

